---
layout: post
title:  "Perlite"
date:   2025-09-20
categories: blog
---

# How to set up Perlite for Obsidian

Install dependancies:
```bash
sudo apt install nginx php php-fpm php-yaml cron git zip python3-certbot-nginx certbot apache2-utils
```

Install perlite:
```bash
sudo mkdir /srv
wget https://github.com/secure-77/Perlite/releases/download/1.6/Perlite_1.6.zip #or your version of perlite
unzip Perlite_1.6.zip
mv perlite/* /srv/perlite/
```

Create your nginx config:
```bash
rm /etc/nginx/sites-available/default
vim /etc/nginx/sites-available/notes.soulsender.me
cd /etc/nginx/sites-enabled
ln -s /etc/nginx/sites-available/notes.soulsender.me
```

```
server {
        server_name notes.soulsender.me;

        root /srv/perlite/;
        index index.php index.html index.htm;

        location / {
                try_files $uri $uri/ /index.php;
        }

        location ~ \.php$ {
               include snippets/fastcgi-php.conf;
               # make sure this path is for your correct php version
               fastcgi_pass unix:/var/run/php/php8.4-fpm.sock;
        }

        location ~ /\.ht {
                deny all;
        }

        location ~* ^/(.*)/.obsidian/appearance.json$ {
                allow all;
        }

        location ~* ^/(.*)/.obsidian/(.*)/theme.css$ {
                allow all;
        }

        #added for this specific setup, thanks sec77!
        location ~* ^/.obsidian/(.*)/theme.css$ {
                allow all;
        }

        location ~ \.(git|github|obsidian|trash) {
                deny all;
        }

        location ~ \.(md|json)$ {
                deny all;
        }
}
```

Make sure your dns record points to your server

Request a certificate:
```bash
sudo certbot --nginx -d notes.soulsender.me
```

Do this thing idk:
```bash
sudo mkdir -p /etc/nginx/auth/
sudo htpasswd -c /etc/nginx/auth/default.htpasswd nothing
```

Edit the perlite config for your use:
```bash
vim /srv/perlite/settings.php
```

Your obsidian vault goes at the root of `/srv/perlite/`. I wanted it to automatically update so I created a cronjob to git pull every 5 minutes.
```
*/5 * * * * cd /srv/perlite/Notes && /usr/bin/git pull
```

Enable & start nginx:
```bash
sudo pkill -f nginx & wait $!
sudo systemctl enable nginx --now
```























    1  apt update
    2  sudo apt update
    3  sudo apt install nginx
    4  sudo apt upgrade
    5  clear
    6  ls
    7  ls -l
    8  sudo mv sites-available /etc/nginx/
    9  sudo mv sites-available /etc/nginx/ -f
   10  sudo mv sites-available /etc/nginx/ -fr
   11  sudo mv sites-available /etc/nginx/
   12  cd sites-available/
   13  sudo mv * /etc/nginx/sites-available/
   14  cd /etc/nginx/sites-available/
   15  ls
   16  clear
   17  ls
   18  sudo systemctl enable nginx --now
   19  rm default
   20  sudo rm default
   21  ls
   22  ls -l
   23  ln -s notes.soulsender.me /etc/nginx/sites-available/notes.soulsender.me
   24  ln -s notes.soulsender.me /etc/nginx/sites-enabled/notes.soulsender.me
   25  sudo ln -s notes.soulsender.me /etc/nginx/sites-enabled/notes.soulsender.me
   26  cd ..
   27  ls -l site-enabled
   28  ls
   29  ls sites-enabled/
   30  ls sites-enabled/ -l
   31  cd site-enabled
   32  cd sites-
   33  cd sites-enabled/
   34  ls
   35  rm notes.soulsender.me
   36  sudo rm notes.soulsender.me
   37  ln -s notes.soulsender.me /etc/nginx/sites-available/notes.soulsender.me
   38  ls
   39  ln -s
   40  ln --help
   41  clear
   42  ln --help
   43  ln -s /etc/nginx/sites-available/notes.soulsender.me
   44  sudo ln -s /etc/nginx/sites-available/notes.soulsender.me
   45  ls
   46  ls notes.soulsender.me
   47  rm default
   48  sudo rm default
   49  sudo ln -s /etc/nginx/sites-available/server.soulsender.me
   50  sudo ln -s /etc/nginx/sites-available/status.soulsender.me
   51  nginx
   52  sudo systemctl restart nginx
   53  sudo sudo systemctl restart nginx
   54  sudo systemctl restart nginx
   55  sudo systemctl status nginx
   56  sudo apt install certbot
   57  ls
   58  rm server.soulsender.me
   59  sudo rm server.soulsender.me
   60  sudo rm status.soulsender.me.soulsender.me
   61  sudo rm status.soulsender.me
   62  clear
   63  ls
   64  certbot
   65  mkdir /perlite
   66  sudo mkdir /perlite
   67  sudo chmod 770 /perlite/
   68  ls -l /perlite/
   69  cd /perlite/
   70  ls -ld /perlite/
   71  sudo chmod 777 /perlite/
   72  cd /perlite/
   73  ls
   74  wget
   75  wget https://github.com/secure-77/Perlite/releases/download/1.6/Perlite_1.6.zip
   76  ls
   77  unzip Perlite_1.6.zip
   78  zip
   79  sudo apt install zip
   80  ls
   81  unzip Perlite_1.6.zip
   82  ls
   83  ls perlite/
   84  ls
   85  mv Perlite_1.6.zip ~
   86  rm -rf *
   87  ls
   88  clear
   89  cd
   90  ls
   91  unzip Perlite_1.6.zip
   92  ls
   93  mv perlite/* /perlite/
   94  rm Changelog.md LICENSE README.md docker-compose.yml Perlite_1.6.zip
   95  ls
   96  ls web/
   97  rm -rf /perlite/
   98  sudo rm -rf /perlite/
   99  clear
  100  ls
  101  mkdir /serve
  102  sudo mkdir /srv
  103  cd /srv/
  104  ls
  105  cd ..
  106  ls /
  107  ls -ld /srv/
  108  cd srv/
  109  wget https://github.com/secure-77/Perlite/releases/download/1.6/Perlite_1.6.zip
  110  sudo wget https://github.com/secure-77/Perlite/releases/download/1.6/Perlite_1.6.zip
  111  ls
  112  sudo unzip Perlite_1.6.zip
  113  ls
  114  sudo rm Changelog.md LICENSE Perlite_1.6.zip README.md docker-compose.yml
  115  clear
  116  ls
  117  sudo certbot
  118  sudo certbot cert
  119  sudo certbot cert -d notes.soulsender.me
  120  man certbot
  121  sudo certbot cert -d soulsender.me --nginx
  122  certbot --nginx --notes.soulsender.me
  123  sudo certbot --nginx --notes.soulsender.me
  124  sudo certbot --nginx notes.soulsender.me
  125  sudo certbot --nginx -d notes.soulsender.me
  126  cat /var/log/letsencrypt/letsencrypt.log
  127  sudo cat /var/log/letsencrypt/letsencrypt.log
  128  sudo apt install  python3-certbot-nginx
  129  sudo certbot --nginx -d notes.soulsender.me
  130  sudo nginx -t
  131  clear
  132  sudo nginx -t
  133  vim /etc/nginx/sites-available/notes.soulsender.me
  134  sudo nginx -t
  135  sudo certbot --nginx -d notes.soulsender.me
  136  sudo apt install gh
  137  ls
  138  crontab -e
  139  sudo apt install cron
  140  gh auth login
  141  sudo apt install git
  142  gh auth login
  143  cd perlite/
  144  ls
  145  git clone https://github.com/Soulsender/Notes
  146  sudo git clone https://github.com/Soulsender/Notes
  147  gh auth login
  148  git clone https://github.com/Soulsender/Notes
  149  sudo git clone https://github.com/Soulsender/Notes
  150  cd ..
  151  sudo chmod 777 perlite/
  152  cd perlite/
  153  ls
  154  sudo git clone https://github.com/Soulsender/Notes
  155  git clone https://github.com/Soulsender/Notes
  156  cd Notes/
  157  ls
  158  :q
  159  crontab -e
  160  sudo systemctl restart nginx
  161  sudo systemctl status nginx
  162  sudo systemctl status apache2
  163  sudo systemctl status apache
  164  sudo systemctl stop nginx
  165  sudo systemctl start nginx
  166  lsof -i :80 or sudo fuser -k 80/tcp
  167  lsof -i :80 or sudo fuser -k 80/tcp
  168  sudo apt install lsof
  169  lsof -i :80 or sudo fuser -k 80/tcp
  170  lsof -i :80
  171  sudo apachectl stop
  172  cd /etc/nginx/sites-enabled/
  173  ls
  174  clear
  175  ls
  176  vim notes.soulsender.me
  177  cat notes.soulsender.me
  178  sudo apt install apache2-utils -y
  179  sudo apachectl stop
  180  htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  181  htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  182  sudo htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  183  clear
  184  sudo systemctl start nginx
  185  sudo systemctl status nginx
  186* lsof :8
  187  lsof -i :80
  188  lsof -i 80
  189  lsof -i :80
  190  sudo pkill -f nginx & wait $!
  191  sudo systemctl start nginx
  192  sudo systemctl status nginx
  193  sudo htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  194  ls /etc/nginx/auth
  195  mkdir /etc/nginx/auth
  196  sudo apt install php
  197  sudo apt install php-yaml
  198  sudo systemctl restart nginx
  199  sudo systemctl status nginx
  200  php
  201  php -h
  202  php -v
  203  clear
  204  vim notes.soulsender.me
  205  cat notes.soulsender.me
  206  htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  207  sudo mkdir /etc/nginx/auth
  208  htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  209  sudo htpasswd -c /etc/nginx/auth/default.htpasswd nothing
  210  sudo systemctl restart nginx
  211  sudo vim /etc/php/8.4/fpm/pool.d/www.conf
  212  sudo apt install php-fpm
  213  sudo vim /etc/php/8.4/fpm/pool.d/www.conf
  214  sudo systemctl restart nginx
  215  ls /srv/perlite/
  216  sudo chmod -R 777 /srv/
  217  sudo systemctl restart nginx
  218  ls /srv/[er
  219  ls /srv/perlite/
  220  rm -rf /srv/perlite/Demo/
  221  cd /srv
  222  cd perlite/
  223  vim settings.php
  224  ls
  225  cd vendor/
  226  ls
  227  cd ..
  228  vim helper.php
  229  vim settings.php
  230  sudo systemctl restart nginx
  231  vim settings.php
  232  ls Notes/
  233  vim settings.php
  234  ls
  235  vim /etc/nginx/sites-available/notes.soulsender.me
  236  cat /etc/nginx/sites-available/notes.soulsender.me
  237  vim /etc/nginx/sites-available/notes.soulsender.me
  238  sudo systemctl restart nginx
  239  vim /etc/nginx/sites-available/notes.soulsender.me
  240  sudo systemctl restart nginx
  241  vim /etc/nginx/sites-available/notes.soulsender.me
  242  sudo systemctl restart nginx
  243  vim settings.php
  244  sudo systemctl restart nginx
  245  vim settings.php
  246  sudo systemctl restart nginx
  247  ls
  248  wget https://raw.githubusercontent.com/Soulsender/assets/483ba2cf9982555d00d45bafeee1f2aa2
  249  cp favicon_dark.svg favicon.ico
  250  cp favicon_dark.svg logo.svg
  251  cp favicon_dark.svg perlite.svg
  252  ls
  253  sudo systemctl restart nginx
  254  history
admin@ip-172-31-30-22:/srv/perlite$ history | grep apt
    1  apt update
    2  sudo apt update
    3  sudo apt install nginx
    4  sudo apt upgrade
   56  sudo apt install certbot
   79  sudo apt install zip
  128  sudo apt install  python3-certbot-nginx
  136  sudo apt install gh
  139  sudo apt install cron
  141  sudo apt install git
  168  sudo apt install lsof
  178  sudo apt install apache2-utils -y
  196  sudo apt install php
  197  sudo apt install php-yaml
  212  sudo apt install php-fpm
  255  history | grep apt
